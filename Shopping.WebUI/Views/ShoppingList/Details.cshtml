@{
    ViewData["Title"] = "Shopping List Details";
}

<div class="container mt-5">
    <h1 class="display-4 text-center mb-4">@ViewBag.ShoppingList.Name</h1>
    <p class="text-center">Created on: @ViewBag.ShoppingList.Created.ToString("dd/MM/yyyy HH:mm")</p>

    <h3 class="mt-5">Items:</h3>

    @if (ViewBag.Items != null && ViewBag.Items.Count > 0)
    {
        <ul class="list-group">
            @foreach (var item in ViewBag.Items)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <span>@item.Name (@item.Quantity)</span>
                        @if (item.IsPurchased)
                        {
                            <span class="badge bg-success ms-2">Purchased</span>
                        }
                        else
                        {
                            <span class="badge bg-warning text-dark ms-2">Not Purchased</span>
                        }
                    </div>

                    <form asp-action="TogglePurchaseStatus" asp-controller="ShoppingList" method="post" class="d-inline">
                        <input type="hidden" name="itemId" value="@item.Id" />
                        <input type="hidden" name="shoppingListId" value="@ViewBag.ShoppingList.Id" />
                        <input type="hidden" name="isPurchased" value="@(!item.IsPurchased)" />
                        <button type="submit" class="btn btn-sm @(item.IsPurchased ? "btn-warning" : "btn-success")">
                            @(item.IsPurchased ? "Mark as Not Purchased" : "Mark as Purchased")
                        </button>
                    </form>
                </li>
            }
        </ul>
    }
    else
    {
        <p>No items in this list yet.</p>
    }

    <div class="mt-4">
        <a href="@Url.Action("Index", "Home")" class="btn btn-secondary">Back to Lists</a>
    </div>
</div>